## How to troubleshoot windows servers not showing in production splunk


How to troubleshoot windows servers not showing in production splunk
A guide for system administrators
Introduction
Splunk is a software platform that allows you to collect, analyze, and visualize data from various sources. Splunk can help you monitor the performance, availability, and security of your windows servers. However, sometimes you may encounter the issue of windows servers not showing in production splunk. This means that splunk is not receiving data from these servers, and you may miss important alerts or insights.
This document will explain how to troubleshoot this issue and restore the data flow from your windows servers to splunk. The document will cover the following steps:
•	Verify the network connectivity between the windows servers and the splunk indexer.
•	Check the splunk universal forwarder configuration and status on the windows servers.
•	Review the splunk indexer logs and settings.
•	Test the data ingestion and searchability in splunk.
Step 1: Verify the network connectivity
The first step is to verify that the windows servers can communicate with the splunk indexer over the network. The splunk indexer is the component that receives and stores the data from the forwarders. The default port for the splunk indexer is 9997, but you can change it in the inputs.conf file. You can use the following methods to test the network connectivity:
•	Ping the splunk indexer from the windows servers using the command prompt. For example, ping splunk-indexer.example.com. You should see a reply from the splunk indexer IP address. If you see a request timed out or destination host unreachable message, it means that there is a network issue.
•	Telnet the splunk indexer from the windows servers using the command prompt. For example, telnet splunk-indexer.example.com 9997. You should see a blank screen or a splunkd service message. If you see a connection refused or connection failed message, it means that the port is blocked or the splunk indexer is not listening on that port.
•	Use a network monitoring tool such as Wireshark or TCPView to capture and analyze the network traffic between the windows servers and the splunk indexer. You should see TCP packets with the SYN, ACK, and FIN flags. If you see TCP packets with the RST flag, it means that the connection is reset by either the windows servers or the splunk indexer.
If you find any network issues, you should contact your network administrator or firewall team to resolve them. You should also check the firewall rules and network policies on both the windows servers and the splunk indexer to ensure that they allow the traffic on the splunk indexer port.
Step 2: Check the splunk universal forwarder configuration and status
The second step is to check the splunk universal forwarder configuration and status on the windows servers. The splunk universal forwarder is the agent that collects and sends the data from the windows servers to the splunk indexer. You can use the following methods to check the splunk universal forwarder configuration and status:
•	Open the splunk universal forwarder web interface on the windows servers using a browser. The default port for the splunk universal forwarder web interface is 8089, but you can change it in the web.conf file. For example, [URL]. You should see the splunk universal forwarder home page with the status of the forwarder, the data inputs, and the data outputs. If you see an error message or a blank page, it means that the splunk universal forwarder web interface is not working.
•	Open the splunk universal forwarder configuration files on the windows servers using a text editor. The splunk universal forwarder configuration files are located in the C:\Program Files\SplunkUniversalForwarder\etc\system\local folder. You should check the following files:
•	inputs.conf: This file defines the data sources that the splunk universal forwarder collects and monitors. You should check the [monitor] stanzas and the attributes such as sourcetype, index, and whitelist. You should also check the [default] stanza and the attributes such as host and _TCP_ROUTING.
•	outputs.conf: This file defines the data destinations that the splunk universal forwarder sends the data to. You should check the [tcpout] stanzas and the attributes such as server, indexAndForward, and useACK. You should also check the [tcpout-server] stanzas and the attributes such as sslCertPath and sslPassword.
•	deploymentclient.conf: This file defines the deployment server that the splunk universal forwarder connects to for configuration updates. You should check the [deployment-client] stanza and the attributes such as clientName and targetUri.
Restart the splunk universal forwarder service on the windows servers using the services.msc console or the command prompt. For example, net stop splunkforwarder and net start splunkforwarder. You should see a message that the splunk universal forwarder service is stopped and started successfully. If you see an error message, it means that the splunk universal forwarder service is not working.
If you find any configuration issues, you should edit the splunk universal forwarder configuration files and save the changes. You should also restart the splunk universal forwarder service to apply the changes. You should also check the deployment server logs and settings to ensure that the splunk universal forwarder is receiving the correct configuration updates.
Step 3: Review the splunk indexer logs and settings
The third step is to review the splunk indexer logs and settings. The splunk indexer logs and settings can help you identify any errors or issues that may prevent the splunk indexer from receiving or processing the data from the windows servers. You can use the following methods to review the splunk indexer logs and settings:
•	Open the splunk indexer web interface using a browser. The default port for the splunk indexer web interface is 8000, but you can change it in the web.conf file. For example, [URL]. You should see the splunk indexer home page with the status of the indexer, the data inputs, and the data outputs. You should also see the search and reporting app that allows you to search and analyze the data in splunk.
•	Open the splunk indexer logs using a text editor or the splunk indexer web interface. The splunk indexer logs are located in the /opt/splunk/var/log/splunk folder. You should check the following files:
•	splunkd.log: This file contains the general information and error messages of the splunk indexer. You should look for any messages that indicate a connection error, a data parsing error, or a data indexing error.
•	metrics.log: This file contains the performance metrics of the splunk indexer. You should look for any metrics that indicate a high CPU usage, a high memory usage, a high disk usage, or a high network usage.
•	license_usage.log: This file contains the license usage information of the splunk indexer. You should look for any messages that indicate a license violation, a license warning, or a license expiration.
Open the splunk indexer configuration files using a text editor or the splunk indexer web interface. The splunk indexer configuration files are located in the /opt/splunk/etc/system/local folder. You should check the following files:
•	inputs.conf: This file defines the data sources that the splunk indexer receives and monitors. You should check the [splunktcp] stanzas and the attributes such as port, connection_host, and index.
•	outputs.conf: This file defines the data destinations that the splunk indexer sends the data to. You should check the [indexer_discovery] stanzas and the attributes such as pass4SymmKey and master_uri.
•	indexes.conf: This file defines the data indexes that the splunk indexer creates and maintains. You should check the [default] stanza and the attributes such as homePath, coldPath, and thawedPath. You should also check the [index_name] stanzas and the attributes such as maxDataSize, frozenTimePeriodInSecs, and maxTotalDataSizeMB.
If you find any log or setting issues, you should fix them or contact the splunk support team for assistance. You should also restart the splunk indexer service to apply the changes. You can use the command splunk restart or the splunk indexer web interface to restart the splunk indexer service.
Step 4: Test the data ingestion and searchability
The final step is to test the data ingestion and searchability in splunk. The data ingestion and searchability in splunk can help you verify that the data from the windows servers is received and indexed by the splunk indexer, and that you can search and analyze the data in splunk. You can use the following methods to test the data ingestion and searchability:
•	Use the splunk indexer web interface to search and analyze the data in splunk. You can use the search and reporting app or the data summary app to search and analyze the data in splunk. You should use the following search commands and parameters:
•	index: This parameter specifies the index name that you want to search. For example, index=windows.
•	source: This parameter specifies the data source that you want to search. For example, source=WinEventLog:Security.
•	sourcetype: This parameter specifies the data type that you want to search. For example, sourcetype=WinEventLog:Security.
•	host: This parameter specifies the host name that you want to search. For example, host=windows-server.example.com.
•	time range: This parameter specifies the time range that you want to search. For example, earliest=-1h latest=now.
Use the splunk universal forwarder web interface to check the data inputs and outputs on the windows servers. You should see the data inputs and outputs that match the splunk universal forwarder configuration files. You should also see the data volume and the data throughput that indicate the data flow from the windows servers to the splunk indexer.
Use the splunk indexer web interface to check the data inputs and outputs on the splunk indexer. You should see the data inputs and outputs that match the splunk indexer configuration files. You should also see the data volume and the data throughput that indicate the data flow from the splunk universal forwarder to the splunk indexer.
If you see the data from the windows servers in splunk, it means that the issue of windows servers not showing in production splunk is resolved. You can now use splunk to monitor, alert, and visualize the data from your windows servers. If you do not see the data from the windows servers in splunk, it means that the issue is still present. You should review the previous steps and check for any errors or issues. You should also contact the splunk support team for further assistance.

